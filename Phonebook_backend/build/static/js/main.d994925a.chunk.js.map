{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["Persons","_ref","personsCopy","handleDelete","react_default","a","createElement","map","person","key","name","number","onClick","Filter","filter","handleFilter","value","onChange","PersonForm","addPerson","handlePersonChange","handleNumberChange","newName","newNumber","onSubmit","type","baseUrl","getAll","axios","get","then","response","data","services_persons","newObject","post","id","delete","concat","put","Notification","successMessage","className","ErrorNotification","errorMessage","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilter","_useState9","_useState10","setsuccessMessage","_useState11","_useState12","seterrorMessage","useEffect","personService","initialPersons","handleUpdate","personObject","find","p","returnedPerson","setTimeout","catch","error","toLowerCase","includes","components_Notification","components_ErrorNotification","components_Filter","event","target","components_PersonForm","preventDefault","length","console","log","popup","window","confirm","components_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.d994925a.chunk.js","sourcesContent":["import React from 'react'\n\nconst Persons = ({personsCopy, handleDelete}) =>\n    (\n        <div>\n        {personsCopy.map(person => <div key={person.name}> {person.name} {person.number} \n        <button onClick={() => handleDelete(person)}> delete </button> </div> )}\n       </div>\n    )\n\nexport default Persons","import React from 'react'\n\nconst Filter = ({filter, handleFilter}) => (\n  <div> \n    <p>filter shown with <input value={filter} onChange={handleFilter}/> </p>\n  </div>\n)\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({addPerson,handlePersonChange,handleNumberChange,newName,newNumber}) => (\n    <form onSubmit={addPerson}>\n        <div>\n          Name: <input value={newName} onChange={handlePersonChange}/>\n        </div>\n        <div>\n          Number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form> \n)\n\nexport default PersonForm","import axios from 'axios'\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id)=>{\n   axios.delete(`${baseUrl}/${id}`)\n   return getAll() \n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, update }","import React from \"react\"\nconst Notification = ({ successMessage}) => {\n\n    if (successMessage === null) {\n      return null\n    }\n\n    return (\n      <div className='success'>\n        {successMessage}\n      </div>\n    )\n  }\n  export default Notification","import React from \"react\"\nconst ErrorNotification = ({ errorMessage}) => {\n\n    if (errorMessage === null) {\n      return null\n    }\n\n    return (\n      <div className='error'>\n        {errorMessage}\n      </div>\n    )\n  }\n  export default ErrorNotification","import React from 'react'\nimport { useState, useEffect } from 'react'\nimport Persons from \"./components/Persons\"\nimport Filter from \"./components/Filter\"\nimport PersonForm from \"./components/PersonForm\"\nimport personService from \"./services/persons\"\nimport Notification from './components/Notification'\nimport \"./index.css\"\nimport ErrorNotification from './components/ErrorNotification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter,setNewFilter] = useState('')\n  const [successMessage, setsuccessMessage]=useState(null)\n  const [errorMessage, seterrorMessage]=useState(null)\n\n\n\n  useEffect(() => {\n   personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n   const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    // can use function array.some()\n    if(persons.filter(person => person.name === newName).length === 0){\n      personService\n      .create(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setsuccessMessage(`added ${returnedPerson.name}`)\n        setTimeout(() => {\n          setsuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log('fail')\n      })\n    }\n    else{\n       const popup = `${newName} is already added to phonebook, replace the old number with a new one ?`\n       const confirm = window.confirm(popup)\n       if(confirm){\n          handleUpdate(personObject)\n        }\n       }\n    setNewName('')\n    setNewNumber('')\n  }\n   \n   const handlePersonChange = (event) => {\n      setNewName(event.target.value)\n   }\n\n   const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n }\n\n const handleFilter = (event) => {\n  // state change is asynchronous\n    setNewFilter(event.target.value)\n }\n\n const handleDelete = (personsCopy) => {\n  const popup = `Delete ${personsCopy.name} ?`\n  const confirm = window.confirm(popup)\n  if(confirm){\n  personService\n      .deletePerson(personsCopy.id)\n      .then(returnedPerson => {\n        setPersons(returnedPerson)\n      })\n    }\n } \n\n const handleUpdate = (personObject) => {\n  const person = persons.find(p => p.name === personObject.name)\n  const id = person.id\n  personService\n          .update(id, personObject)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n            setsuccessMessage(`Updated ${newName}'s number`)\n         setTimeout(() => {\n           setsuccessMessage(null)\n         }, 5000)\n          })\n          .catch(error => {\n            seterrorMessage(`Information of ${person.name} has already been removed from server`)\n            setTimeout(() => {\n              seterrorMessage(null)\n            }, 5000)\n          })\n }\n\n const personsCopy = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification successMessage={successMessage}/>\n      <ErrorNotification errorMessage={errorMessage}/>\n      <Filter filter={filter} handleFilter={handleFilter}/>\n      <h3>Add a new</h3>\n      <PersonForm addPerson={addPerson} handlePersonChange={handlePersonChange} \n      handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\n      <h2>Numbers</h2>\n      <Persons personsCopy={personsCopy} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)"],"sourceRoot":""}